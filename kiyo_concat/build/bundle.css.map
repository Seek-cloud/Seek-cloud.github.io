{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\App.svelte",
    "..\\..\\AddHeadButton.svelte",
    "..\\..\\Footer.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { fabric } from 'fabric'\n  import ImageLoader from './ImageLoader.svelte'\n  import AddHeadButton from './AddHeadButton.svelte'\n  import Canvas from './Canvas.svelte'\n  import Image from './Image.svelte'\n  import Head from './Head.svelte'\n  import Footer from './Footer.svelte'\n  import images from './images'\n\n  let canvas, image, scale, heads = []\n  let result\n\n  function handleKeydown (e) {\n    if (e.which === 8 || e.which === 46) { // backspace or delete key\n      deleteSelected()\n    }\n  }\n\n  function deleteSelected () {\n    const activeObjects = canvas.getActiveObjects()\n    activeObjects.forEach(activeObject => {\n      if (activeObject.head) {\n        heads = heads.filter(head => head.id !== activeObject.head.id)\n      }\n    })\n  }\n\n  function replaceImage (e) {\n    image = e.detail.image\n    heads = []\n  }\n\n  function addHead (e) {\n    heads = [...heads, e.detail.head]\n  }\n\n  function output () {\n    const width = image ? image.width : canvas.width\n    const height = image ? image.height : canvas.height\n\n    result = canvas.toDataURL({\n      format: 'png',\n      multiplier: 1 / scale,\n      width: width * scale,\n      height: height * scale\n    })\n  }\n\n  function clearResult () {\n    result = null\n  }\n</script>\n\n<svelte:head>\n  <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css'\n      integrity='sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh'\n      crossorigin='anonymous'>\n</svelte:head>\n\n<svelte:body on:keydown={handleKeydown} />\n\n<style>\n  .result {\n    position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background-color: white;\n    overflow-y: auto;\n    z-index: 10;\n  }\n\n  .images {\n    width: 250px;\n  }\n</style>\n\n<div class='container'>\n  <h1>接頭霸王 <small class='text-muted'>v0.9</small></h1>\n  <div class='form-row'>\n    <div class='col'>\n      <div>第一步, 選擇原圖:</div>\n      <ImageLoader on:load={replaceImage} />\n    </div>\n    <div class='col'>\n      <div>第三步, 把頭拖到喜歡的地方,</div>\n      <div class='text-muted'>可拖拉控制點翻轉圖片!</div>\n      <div class='text-muted'>按 delete 刪除多餘的頭.</div>\n    </div>\n    <div class='col'>\n      <div>最後, 下載並分享:</div>\n      <button class='btn btn-outline-secondary' on:click={output}>\n        下載圖片\n      </button>\n    </div>\n  </div>\n\n  <div class='d-flex'>\n    <div class='images'>\n      <div>第二步, 加頭:</div>\n      <div class='d-flex flex-wrap'>\n        {#each images as image}\n          <AddHeadButton source={image} on:add={addHead} />\n        {/each}\n      </div>\n    </div>\n\n    <div class='flex-fill'>\n      <Canvas bind:canvas />\n    </div>\n  </div>\n\n  <Footer />\n\n  {#if canvas}\n    {#if image}\n      {#each [image] as image (image.src)}\n        <Image {canvas} {image} bind:scale />\n      {/each}\n    {/if}\n\n    {#each heads as head (head.id)}\n      <Head {canvas} {head} />\n    {/each}\n  {/if}\n</div>\n\n{#if result}\n  <div class='result'>\n    <div class='container'>\n      <div class='d-flex'>\n        <div class='flex-fill'>完成了! 請對圖片按右鍵另存:</div>\n        <button class='btn btn-primary' on:click={clearResult}>繼續編輯</button>\n      </div>\n      <img src={result} style='max-width: 100%;' />\n    </div>\n  </div>\n{/if}\n",
    "<script>\n  import { createEventDispatcher } from 'svelte'\n\n  export let source\n\n  const dispatch = createEventDispatcher()\n\n  function addHead () {\n    dispatch('add', { head: { id: Date.now(), source } })\n  }\n</script>\n\n<style>\n  .add-head-button {\n    cursor: pointer;\n    display: inline-block;\n    flex-basis: 50px;\n    opacity: 0.5;\n    transition: opacity 0.3s ease;\n  }\n\n  .add-head-button:hover {\n    opacity: 1;\n  }\n\n  img {\n    width: 50px;\n    height: 50px;\n    object-fit: cover;\n  }\n</style>\n\n<div class='add-head-button' on:click={addHead}>\n  <img src={source} />\n</div>\n",
    "<style>\n  .footer {\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n</style>\n\n<div class='footer position-fixed bg-white'>\n  <div class='text-muted small text-center'>\n    網站開發: <a href='http://ayaya.tw' target='_blank'>ayaya.tw</a>\n    特別感謝: <a href='https://www.pixiv.net/member.php?id=5676585' target='_blank'>\n      星爆大師 YuyuSuika\n    </a>, 妃芽♪\n  </div>\n\n  <div class='text-muted small text-center'>\n    本站為粉絲自製, 與 Cygames, So-net Taiwan 皆無任何關係,\n    本網站使用的遊戲圖像的版權,\n    商標權和其他知識產權屬於原內容提供者 (So-net Taiwan, Cygames).\n  </div>\n\n  <div class='text-nuted small text-center'>\n    若您喜歡本站, 請考慮\n    <a href='http://ayaya.tw/donate/' target='_blank'>贊助</a>\n    分擔伺服器費用.\n  </div>\n</div>\n"
  ],
  "names": [],
  "mappings": "AA+DE,OAAO,eAAC,CAAC,AACP,QAAQ,CAAE,KAAK,CACf,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,GAAG,CAAE,CAAC,CACN,MAAM,CAAE,CAAC,CACT,gBAAgB,CAAE,KAAK,CACvB,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,EAAE,AACb,CAAC,AAED,OAAO,eAAC,CAAC,AACP,KAAK,CAAE,KAAK,AACd,CAAC;AC/DD,gBAAgB,cAAC,CAAC,AAChB,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,YAAY,CACrB,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,GAAG,CACZ,UAAU,CAAE,OAAO,CAAC,IAAI,CAAC,IAAI,AAC/B,CAAC,AAED,8BAAgB,MAAM,AAAC,CAAC,AACtB,OAAO,CAAE,CAAC,AACZ,CAAC,AAED,GAAG,cAAC,CAAC,AACH,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,KAAK,AACnB,CAAC;AC5BD,OAAO,eAAC,CAAC,AACP,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,CAAC,AACX,CAAC"
}